<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    th:replace="~{fragments/layout :: layout(title='Bildirimler', content=~{::content})}">

<body>
    <div th:fragment="content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>
                <i class="bi bi-bell"></i> Bildirimler
                <span th:if="${unreadCount > 0}" class="badge bg-danger" th:text="${unreadCount}">0</span>
            </h2>
            <a th:if="${unreadCount > 0}" href="/notifications/mark-all-read" class="btn btn-outline-light">
                <i class="bi bi-check-all"></i> Tümünü Okundu İşaretle
            </a>
        </div>

        <div class="notifications-list">
            <div th:each="notification : ${notifications}" class="notification-card mb-3"
                th:classappend="${!notification.isRead} ? 'unread' : ''">
                <div class="card" style="background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1);">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h5 class="card-title mb-1">
                                    <i class="bi bi-check-circle-fill text-success"
                                        th:if="${notification.type == 'SUCCESS'}"></i>
                                    <i class="bi bi-x-circle-fill text-danger"
                                        th:if="${notification.type == 'ERROR'}"></i>
                                    <i class="bi bi-info-circle-fill text-info"
                                        th:if="${notification.type == 'INFO'}"></i>
                                    <i class="bi bi-exclamation-circle-fill text-warning"
                                        th:if="${notification.type == 'WARNING'}"></i>
                                    <span th:text="${notification.title}">Bildirim Başlığı</span>
                                </h5>
                                <p class="card-text text-secondary mb-2" th:text="${notification.message}">Bildirim
                                    mesajı...</p>
                                <small class="text-muted">
                                    <i class="bi bi-clock"></i>
                                    <span
                                        th:text="${#temporals.format(notification.createdAt, 'dd MMM yyyy HH:mm')}">Tarih</span>
                                </small>
                            </div>
                            <div>
                                <span th:if="${!notification.isRead}" class="badge bg-primary">Yeni</span>
                                <a th:if="${!notification.isRead}"
                                    th:href="@{/notifications/{id}/read(id=${notification.id})}"
                                    class="btn btn-sm btn-outline-light ms-2" title="Okundu İşaretle">
                                    <i class="bi bi-check"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div th:if="${#lists.isEmpty(notifications)}" class="text-center text-secondary py-5">
                <i class="bi bi-bell-slash" style="font-size: 3rem;"></i>
                <p class="mt-3">Henüz bildiriminiz yok</p>
            </div>
        </div>
    </div>

    <style>
        .notification-card.unread .card {
            border-left: 4px solid #e94560 !important;
            background: rgba(233, 69, 96, 0.05) !important;
        }
    </style>
</body>

</html>